"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function formatTime(date) {
    var year = date.getFullYear();
    var month = date.getMonth() + 1;
    var day = date.getDate();
    var hour = date.getHours();
    var minute = date.getMinutes();
    var second = date.getSeconds();
    return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':');
}
exports.formatTime = formatTime;
var formatNumber = function (n) {
    var str = n.toString();
    return str[1] ? str : '0' + str;
};
function isBookInfoAvailable(book) {
    if (!confirmStrLength(book.title)) {
        return getErroMessage(book.title, "书名");
    }
    else if (!confirmStrLength(book.frontImage)) {
        return getErroMessage("", "书籍图片");
    }
    else if (!confirmStrLength(book.author)) {
        return getErroMessage(book.author, "书籍作者");
    }
    else if (book.totalPages <= 0) {
        return getErroMessage("", "书籍总页数");
    }
    else if (!confirmStrLength(book.readReason)) {
        return getErroMessage(book.readReason, "读书初心");
    }
    return "";
}
exports.isBookInfoAvailable = isBookInfoAvailable;
var confirmStrLength = function (str) {
    if (!str) {
        return false;
    }
    else {
        var tempStr = str.replace(/\s+/g, "");
        if (tempStr.length === 0) {
            return false;
        }
    }
    return true;
};
var getErroMessage = function (str, prefix) {
    if (str) {
        return prefix + "“" + str + "”不符合要求";
    }
    else {
        return prefix + "不能为空";
    }
};
function getImageId(imageUrl) {
    var index = imageUrl.indexOf("=");
    return imageUrl.substring(index + 1, imageUrl.length);
}
exports.getImageId = getImageId;
function getAddUrl(book) {
    var url = "../add/add?title=" + book.title + "&totalPages=" + book.totalPages + "&author=" + book.author + "&publishHouse=" + book.publishHouse + "&currentPage=" + book.currentPage + "&startPage=" + book.startPage + "&endPage=" + book.endPage + "&lastDate=" + book.lastDate + "&description=" + book.description + "&readReason=" + book.readReason + "&reading=" + book.reading + "&percent=" + book.percent + "&publishDate=" + book.publishDate + "&from=2";
    if (book.frontImage.indexOf("=") !== -1) {
        return url + "&imageId=" + getImageId(book.frontImage);
    }
    else {
        return url + "&frontImage=" + book.frontImage;
    }
}
exports.getAddUrl = getAddUrl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxTQUFnQixVQUFVLENBQUMsSUFBVTtJQUNuQyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUE7SUFDL0IsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNqQyxJQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDMUIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFBO0lBQzVCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtJQUNoQyxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUE7SUFFaEMsT0FBTyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUE7QUFDbEgsQ0FBQztBQVRELGdDQVNDO0FBRUQsSUFBTSxZQUFZLEdBQUcsVUFBQyxDQUFTO0lBQzdCLElBQU0sR0FBRyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQTtJQUN4QixPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFBO0FBQ2pDLENBQUMsQ0FBQTtBQUVELFNBQWdCLG1CQUFtQixDQUFDLElBQVU7SUFFNUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUNqQyxPQUFPLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ3pDO1NBQU0sSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRTtRQUM3QyxPQUFPLGNBQWMsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDbkM7U0FBTSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1FBQ3pDLE9BQU8sY0FBYyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDNUM7U0FBTSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxFQUFFO1FBQy9CLE9BQU8sY0FBYyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNwQztTQUFNLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUU7UUFDN0MsT0FBTyxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUNoRDtJQUNELE9BQU8sRUFBRSxDQUFDO0FBQ1osQ0FBQztBQWRELGtEQWNDO0FBRUQsSUFBTSxnQkFBZ0IsR0FBRyxVQUFDLEdBQVc7SUFDbkMsSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUNSLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7U0FBTTtRQUNMLElBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDeEIsT0FBTyxLQUFLLENBQUM7U0FDZDtLQUNGO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDLENBQUE7QUFFRCxJQUFNLGNBQWMsR0FBRyxVQUFDLEdBQVcsRUFBRSxNQUFjO0lBQ2pELElBQUksR0FBRyxFQUFFO1FBQ1AsT0FBTyxNQUFNLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUM7S0FDdEM7U0FBTTtRQUNMLE9BQU8sTUFBTSxHQUFHLE1BQU0sQ0FBQztLQUN4QjtBQUNILENBQUMsQ0FBQTtBQUVELFNBQWdCLFVBQVUsQ0FBQyxRQUFnQjtJQUN6QyxJQUFJLEtBQUssR0FBVyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFDLE9BQU8sUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4RCxDQUFDO0FBSEQsZ0NBR0M7QUFFRCxTQUFnQixTQUFTLENBQUMsSUFBVTtJQUNsQyxJQUFJLEdBQUcsR0FBRyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLGNBQWMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLGdCQUFnQixHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsYUFBYSxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsY0FBYyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsZUFBZSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO0lBQ3JjLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDdkMsT0FBTyxHQUFHLEdBQUcsV0FBVyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDeEQ7U0FBTTtRQUNMLE9BQU8sR0FBRyxHQUFHLGNBQWMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0tBQy9DO0FBQ0gsQ0FBQztBQVBELDhCQU9DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vayB9IGZyb20gJy4uL2RhdGEvZGF0YU1vZGVsJ1xuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKVxuICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDFcbiAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKClcbiAgY29uc3QgaG91ciA9IGRhdGUuZ2V0SG91cnMoKVxuICBjb25zdCBtaW51dGUgPSBkYXRlLmdldE1pbnV0ZXMoKVxuICBjb25zdCBzZWNvbmQgPSBkYXRlLmdldFNlY29uZHMoKVxuXG4gIHJldHVybiBbeWVhciwgbW9udGgsIGRheV0ubWFwKGZvcm1hdE51bWJlcikuam9pbignLScpICsgJyAnICsgW2hvdXIsIG1pbnV0ZSwgc2Vjb25kXS5tYXAoZm9ybWF0TnVtYmVyKS5qb2luKCc6Jylcbn1cblxuY29uc3QgZm9ybWF0TnVtYmVyID0gKG46IG51bWJlcikgPT4ge1xuICBjb25zdCBzdHIgPSBuLnRvU3RyaW5nKClcbiAgcmV0dXJuIHN0clsxXSA/IHN0ciA6ICcwJyArIHN0clxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCb29rSW5mb0F2YWlsYWJsZShib29rOiBCb29rKTogc3RyaW5nIHtcbiAgLy8g5qOA5p+l5Lmm5ZCNXG4gIGlmICghY29uZmlybVN0ckxlbmd0aChib29rLnRpdGxlKSkge1xuICAgIHJldHVybiBnZXRFcnJvTWVzc2FnZShib29rLnRpdGxlLCBcIuS5puWQjVwiKTtcbiAgfSBlbHNlIGlmICghY29uZmlybVN0ckxlbmd0aChib29rLmZyb250SW1hZ2UpKSB7XG4gICAgcmV0dXJuIGdldEVycm9NZXNzYWdlKFwiXCIsIFwi5Lmm57GN5Zu+54mHXCIpO1xuICB9IGVsc2UgaWYgKCFjb25maXJtU3RyTGVuZ3RoKGJvb2suYXV0aG9yKSkge1xuICAgIHJldHVybiBnZXRFcnJvTWVzc2FnZShib29rLmF1dGhvciwgXCLkuabnsY3kvZzogIVcIik7XG4gIH0gZWxzZSBpZiAoYm9vay50b3RhbFBhZ2VzIDw9IDApIHtcbiAgICByZXR1cm4gZ2V0RXJyb01lc3NhZ2UoXCJcIiwgXCLkuabnsY3mgLvpobXmlbBcIik7XG4gIH0gZWxzZSBpZiAoIWNvbmZpcm1TdHJMZW5ndGgoYm9vay5yZWFkUmVhc29uKSkge1xuICAgIHJldHVybiBnZXRFcnJvTWVzc2FnZShib29rLnJlYWRSZWFzb24sIFwi6K+75Lmm5Yid5b+DXCIpO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuXG5jb25zdCBjb25maXJtU3RyTGVuZ3RoID0gKHN0cjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIGlmICghc3RyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGxldCB0ZW1wU3RyID0gc3RyLnJlcGxhY2UoL1xccysvZywgXCJcIik7XG4gICAgaWYgKHRlbXBTdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBnZXRFcnJvTWVzc2FnZSA9IChzdHI6IHN0cmluZywgcHJlZml4OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBpZiAoc3RyKSB7XG4gICAgcmV0dXJuIHByZWZpeCArIFwi4oCcXCIgKyBzdHIgKyBcIuKAneS4jeespuWQiOimgeaxglwiO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwcmVmaXggKyBcIuS4jeiDveS4uuepulwiO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbWFnZUlkKGltYWdlVXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgaW5kZXg6IG51bWJlciA9IGltYWdlVXJsLmluZGV4T2YoXCI9XCIpO1xuICByZXR1cm4gaW1hZ2VVcmwuc3Vic3RyaW5nKGluZGV4ICsgMSwgaW1hZ2VVcmwubGVuZ3RoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkZFVybChib29rOiBCb29rKTogc3RyaW5nIHtcbiAgbGV0IHVybCA9IFwiLi4vYWRkL2FkZD90aXRsZT1cIiArIGJvb2sudGl0bGUgKyBcIiZ0b3RhbFBhZ2VzPVwiICsgYm9vay50b3RhbFBhZ2VzICsgXCImYXV0aG9yPVwiICsgYm9vay5hdXRob3IgKyBcIiZwdWJsaXNoSG91c2U9XCIgKyBib29rLnB1Ymxpc2hIb3VzZSArIFwiJmN1cnJlbnRQYWdlPVwiICsgYm9vay5jdXJyZW50UGFnZSArIFwiJnN0YXJ0UGFnZT1cIiArIGJvb2suc3RhcnRQYWdlICsgXCImZW5kUGFnZT1cIiArIGJvb2suZW5kUGFnZSArIFwiJmxhc3REYXRlPVwiICsgYm9vay5sYXN0RGF0ZSArIFwiJmRlc2NyaXB0aW9uPVwiICsgYm9vay5kZXNjcmlwdGlvbiArIFwiJnJlYWRSZWFzb249XCIgKyBib29rLnJlYWRSZWFzb24gKyBcIiZyZWFkaW5nPVwiICsgYm9vay5yZWFkaW5nICsgXCImcGVyY2VudD1cIiArIGJvb2sucGVyY2VudCArIFwiJnB1Ymxpc2hEYXRlPVwiICsgYm9vay5wdWJsaXNoRGF0ZSArIFwiJmZyb209MlwiO1xuICBpZiAoYm9vay5mcm9udEltYWdlLmluZGV4T2YoXCI9XCIpICE9PSAtMSkge1xuICAgIHJldHVybiB1cmwgKyBcIiZpbWFnZUlkPVwiICsgZ2V0SW1hZ2VJZChib29rLmZyb250SW1hZ2UpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB1cmwgKyBcIiZmcm9udEltYWdlPVwiICsgYm9vay5mcm9udEltYWdlO1xuICB9XG59XG4iXX0=