"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var netService_1 = require("../../network/netService");
Page({
    data: {
        title: "",
        frontImage: "",
        totalPages: 0,
        currentPage: 0,
        lastDate: "",
        author: "",
        description: "",
        readReason: "",
        thoughts: null,
        reading: true,
        percent: 0,
        startPage: 0,
        endPage: 0,
        publishHouse: "",
        publishDate: "",
        openThoughtButton: false
    },
    onLoad: function (option) {
        console.log(option);
        if (Number(option.from) === 0) {
            if (option.errMessage) {
                wx.showToast({
                    title: option.errMessage,
                    icon: 'none',
                    duration: 2000
                });
            }
            else {
                var pages = option.totalPages ? option.totalPages : '0';
                var length_1 = pages.length;
                if (pages.lastIndexOf('页') !== -1) {
                    pages = pages.substring(0, length_1 - 1);
                }
                this.setData({
                    title: option.title ? option.title : "",
                    author: option.author ? option.author : "",
                    frontImage: option.imageId ? netService_1.getBookImage(option.imageId) : "",
                    publishHouse: option.publishHouse ? option.publishHouse : "",
                    totalPages: Number(pages)
                });
            }
        }
        else if (Number(option.from) === 1) {
            console.log("点击手动添加进来的");
        }
    },
    clickImage: function () {
        var pageThis = this;
        wx.chooseImage({
            count: 1,
            sizeType: ['original', 'compressed'],
            sourceType: ['album', 'camera'],
            success: function (res) {
                pageThis.setData({
                    frontImage: res.tempFilePaths[0]
                });
            }
        });
    },
    bookNameInput: function (e) {
        this.setData({
            title: e.detail.value
        });
    },
    bookAuthorInput: function (e) {
        this.setData({
            author: e.detail.value
        });
    },
    bookTotalPageInput: function (e) {
        this.setData({
            totalPages: Number(e.detail.value)
        });
    },
    readingStatusChange: function (e) {
        this.setData({
            reading: e.detail.value
        });
    },
    bookReasonInput: function (e) {
        this.setData({
            readReason: e.detail.value
        });
    },
    bookPublishHouseInput: function (e) {
        this.setData({
            publishHouse: e.detail.value
        });
    },
    bookPublishDateInput: function (e) {
        this.setData({
            publishDate: e.detail.value
        });
    },
    bookDescriptionInput: function (e) {
        this.setData({
            description: e.detail.value
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYWRkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdURBQXVEO0FBRXZELElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLEtBQUssRUFBRSxFQUFFO1FBQ1QsVUFBVSxFQUFFLEVBQUU7UUFDZCxVQUFVLEVBQUUsQ0FBQztRQUNiLFdBQVcsRUFBRSxDQUFDO1FBQ2QsUUFBUSxFQUFFLEVBQUU7UUFDWixNQUFNLEVBQUUsRUFBRTtRQUNWLFdBQVcsRUFBRSxFQUFFO1FBQ2YsVUFBVSxFQUFFLEVBQUU7UUFDZCxRQUFRLEVBQUUsSUFBSTtRQUNkLE9BQU8sRUFBRSxJQUFJO1FBQ2IsT0FBTyxFQUFFLENBQUM7UUFDVixTQUFTLEVBQUUsQ0FBQztRQUNaLE9BQU8sRUFBRSxDQUFDO1FBQ1YsWUFBWSxFQUFFLEVBQUU7UUFDaEIsV0FBVyxFQUFFLEVBQUU7UUFDZixpQkFBaUIsRUFBRSxLQUFLO0tBQ3pCO0lBQ0QsTUFBTSxFQUFOLFVBQU8sTUFBVTtRQUNmLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEIsSUFBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFHLENBQUMsRUFBQztZQUV6QixJQUFHLE1BQU0sQ0FBQyxVQUFVLEVBQUM7Z0JBRW5CLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ1gsS0FBSyxFQUFFLE1BQU0sQ0FBQyxVQUFVO29CQUN4QixJQUFJLEVBQUUsTUFBTTtvQkFDWixRQUFRLEVBQUUsSUFBSTtpQkFDZixDQUFDLENBQUE7YUFDSDtpQkFBSTtnQkFDSCxJQUFJLEtBQUssR0FBVyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBQ2hFLElBQUksUUFBTSxHQUFXLEtBQUssQ0FBQyxNQUFNLENBQUM7Z0JBQ2xDLElBQUcsS0FBSyxDQUFDLFdB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O1NBQzVCLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFDRCxvQkFBb0IsRUFBRSxVQUFVLENBQU07UUFDcEMsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLFdBQVcsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUs7U0FDNUIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJvb2tJbWFnZSB9IGZyb20gJy4uLy4uL25ldHdvcmsvbmV0U2VydmljZSdcblxuUGFnZSh7XG4gIGRhdGE6IHtcbiAgICB0aXRsZTogXCJcIiwgLy8g5Lmm5ZCNXG4gICAgZnJvbnRJbWFnZTogXCJcIiwgLy8g5Zu+54mHXG4gICAgdG90YWxQYWdlczogMCwgLy8g5oC76aG15pWwXG4gICAgY3VycmVudFBhZ2U6IDAsIC8vIOW9k+WJjemYheivu+eahOmhteaVsFxuICAgIGxhc3REYXRlOiBcIlwiLCAvLyDmnIDmlrDmm7TmlrDml7bpl7Qg5bm0LeaciC3ml6VcbiAgICBhdXRob3I6IFwiXCIsIC8vIOS9nOiAhVxuICAgIGRlc2NyaXB0aW9uOiBcIlwiLCAvLyDnroDku4tcbiAgICByZWFkUmVhc29uOiBcIlwiLCAvLyDliJ3lv4PvvIzpmIXor7vnkIbnlLFcbiAgICB0aG91Z2h0czogbnVsbCwgLy8g5oSf5oOzXG4gICAgcmVhZGluZzogdHJ1ZSwgLy8g5piv5ZCm5Zyo6K+7XG4gICAgcGVyY2VudDogMCwgLy8g5b2T5YmN6L+b5bqmXG4gICAgc3RhcnRQYWdlOiAwLFxuICAgIGVuZFBhZ2U6IDAsXG4gICAgcHVibGlzaEhvdXNlOiBcIlwiLFxuICAgIHB1Ymxpc2hEYXRlOiBcIlwiLFxuICAgIG9wZW5UaG91Z2h0QnV0dG9uOiBmYWxzZVxuICB9LFxuICBvbkxvYWQob3B0aW9uOmFueSkge1xuICAgIGNvbnNvbGUubG9nKG9wdGlvbik7XG4gICAgaWYoTnVtYmVyKG9wdGlvbi5mcm9tKT09PTApe1xuICAgICAgLy8g5omr56CB6L+H5p2l55qEXG4gICAgICBpZihvcHRpb24uZXJyTWVzc2FnZSl7XG4gICAgICAgIC8vIOivtOaYjuaciemUmeivr1xuICAgICAgICB3eC5zaG93VG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiBvcHRpb24uZXJyTWVzc2FnZSxcbiAgICAgICAgICBpY29uOiAnbm9uZScsXG4gICAgICAgICAgZHVyYXRpb246IDIwMDBcbiAgICAgICAgfSlcbiAgICAgIH1lbHNle1xuICAgICAgICBsZXQgcGFnZXM6IHN0cmluZyA9IG9wdGlvbi50b3RhbFBhZ2VzID8gb3B0aW9uLnRvdGFsUGFnZXMgOiAnMCc7XG4gICAgICAgIGxldCBsZW5ndGg6IG51bWJlciA9IHBhZ2VzLmxlbmd0aDtcbiAgICAgICAgaWYocGFnZXMubGFzdEluZGV4T2YoJ+mhtScpICE9PSAtMSl7XG4gICAgICAgICAgcGFnZXMgPSBwYWdlcy5zdWJzdHJpbmcoMCwgbGVuZ3RoLTEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICAgIHRpdGxlOiBvcHRpb24udGl0bGUgPyBvcHRpb24udGl0bGUgOiBcIlwiLFxuICAgICAgICAgIGF1dGhvcjogb3B0aW9uLmF1dGhvciA/IG9wdGlvbi5hdXRob3IgOiBcIlwiLFxuICAgICAgICAgIGZyb250SW1hZ2U6IG9wdGlvbi5pbWFnZUlkID8gZ2V0Qm9va0ltYWdlKG9wdGlvbi5pbWFnZUlkKSA6IFwiXCIsXG4gICAgICAgICAgcHVibGlzaEhvdXNlOiBvcHRpb24ucHVibGlzaEhvdXNlID8gb3B0aW9uLnB1Ymxpc2hIb3VzZSA6IFwiXCIsXG4gICAgICAgICAgdG90YWxQYWdlczogTnVtYmVyKHBhZ2VzKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoTnVtYmVyKG9wdGlvbi5mcm9tKSA9PT0gMSl7XG4gICAgICBjb25zb2xlLmxvZyhcIueCueWHu+aJi+WKqOa3u+WKoOi/m+adpeeahFwiKVxuICAgIH1cbiAgICBcbiAgfSxcbiAgY2xpY2tJbWFnZSgpIHtcbiAgICBjb25zdCBwYWdlVGhpcyA9IHRoaXM7XG4gICAgd3guY2hvb3NlSW1hZ2Uoe1xuICAgICAgY291bnQ6IDEsXG4gICAgICBzaXplVHlwZTogWydvcmlnaW5hbCcsICdjb21wcmVzc2VkJ10sXG4gICAgICBzb3VyY2VUeXBlOiBbJ2FsYnVtJywgJ2NhbWVyYSddLFxuICAgICAgc3VjY2VzcyAocmVzKSB7XG4gICAgICAgIC8vIHRlbXBGaWxlUGF0aOWPr+S7peS9nOS4umltZ+agh+etvueahHNyY+WxnuaAp+aYvuekuuWbvueJh1xuICAgICAgICBwYWdlVGhpcy5zZXREYXRhISh7XG4gICAgICAgICAgZnJvbnRJbWFnZTogcmVzLnRlbXBGaWxlUGF0aHNbMF1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGJvb2tOYW1lSW5wdXQ6IGZ1bmN0aW9uIChlOiBhbnkpIHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHRpdGxlOiBlLmRldGFpbC52YWx1ZVxuICAgIH0pXG4gIH0sXG4gIGJvb2tBdXRob3JJbnB1dDogZnVuY3Rpb24gKGU6IGFueSkge1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgYXV0aG9yOiBlLmRldGFpbC52YWx1ZVxuICAgIH0pXG4gIH0sXG4gIGJvb2tUb3RhbFBhZ2VJbnB1dDogZnVuY3Rpb24gKGU6IGFueSkge1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgdG90YWxQYWdlczogTnVtYmVyKGUuZGV0YWlsLnZhbHVlKVxuICAgIH0pXG4gIH0sXG4gIHJlYWRpbmdTdGF0dXNDaGFuZ2U6IGZ1bmN0aW9uIChlOiBhbnkpIHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHJlYWRpbmc6IGUuZGV0YWlsLnZhbHVlXG4gICAgfSlcbiAgfSxcbiAgYm9va1JlYXNvbklucHV0OiBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHJlYWRSZWFzb246IGUuZGV0YWlsLnZhbHVlXG4gICAgfSlcbiAgfSxcbiAgYm9va1B1Ymxpc2hIb3VzZUlucHV0OiBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIHB1Ymxpc2hIb3VzZTogZS5kZXRhaWwudmFsdWVcbiAgICB9KVxuICB9LFxuICBib29rUHVibGlzaERhdGVJbnB1dDogZnVuY3Rpb24gKGU6IGFueSkge1xuICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgcHVibGlzaERhdGU6IGUuZGV0YWlsLnZhbHVlXG4gICAgfSlcbiAgfSxcbiAgYm9va0Rlc2NyaXB0aW9uSW5wdXQ6IGZ1bmN0aW9uIChlOiBhbnkpIHtcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGRlc2NyaXB0aW9uOiBlLmRldGFpbC52YWx1ZVxuICAgIH0pXG4gIH1cbn0pIl19